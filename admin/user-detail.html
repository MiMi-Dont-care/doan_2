<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Chi tiết người dùng - Mì Cay Đức Hiệu</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/grid.css">
    <link rel="stylesheet" href="../css/color.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/button.css">
    <link rel="stylesheet" href="../css/flex.css">
    <link rel="stylesheet" href="../css/admin.css">
    <link rel="stylesheet" href="../css/store.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="logo">Mì Cay Đức Hiệu - Admin</div>
        <div class="user-menu"><i class="fas fa-user-circle"></i> Admin</div>
    </header>

    <!-- Sidebar -->
    <aside class="admin-sidebar">
        <ul>
            <li><a href="dashboard.html" style="color: white; text-decoration: none;"><i
                        class="fas fa-chart-line"></i> Dashboard</a></li>
            <li><a href="store.html" style="color: white; text-decoration: none;"><i class="fas fa-store"></i> Quản lý
                    cửa hàng</a></li>
            <li><a href="contract.html" style="color: white; text-decoration: none;"><i
                        class="fas fa-file-contract"></i> Hợp đồng</a></li>
            <li><a href="revenue.html" style="color: white; text-decoration: none;"><i class="fas fa-dollar-sign"></i>
                    Doanh thu</a></li>
            <li><a href="promotion.html" style="color: white; text-decoration: none;"><i class="fas fa-tags"></i> Khuyến
                    mãi</a></li>
            <li><a href="report.html" style="color: white; text-decoration: none;"><i class="fas fa-chart-pie"></i> Báo
                    cáo</a></li>
            <li class="active"><a href="user.html" style="color: white; text-decoration: none;"><i class="fas fa-users"></i> Người
                    dùng</a></li>
        </ul>
    </aside>

    <!-- Main -->
    <main class="admin-main">
        <h1 class="fs-2 fw-bold mb-3">Chi tiết người dùng</h1>
        <div id="userDetail" class="store-detail"></div>
        <div class="form-actions mt-3">
            <a href="user.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Quay lại</a>
            <a href="#" id="btnEdit" class="btn btn-warning"><i class="fas fa-edit"></i> Sửa</a>
            <button id="btnDelete" class="btn btn-danger"><i class="fas fa-trash"></i> Xóa</button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="admin-footer">© 2025 Mì Cay Đức Hiệu - Admin System</footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");
            let users = JSON.parse(localStorage.getItem("users")) || [];
            let user = users.find(u => u.id == id);

            const detail = document.getElementById("userDetail");
            if (!user) {
                detail.innerHTML = "<p class='text-danger'>Không tìm thấy người dùng.</p>";
                return;
            }

            detail.innerHTML = `
        <p><strong>Tên:</strong> ${user.name}</p>
        <p><strong>Email:</strong> ${user.email}</p>
        <p><strong>SĐT:</strong> ${user.phone}</p>
        <p><strong>Role:</strong> ${user.role}</p>
      `;

            document.getElementById("btnEdit").href = `user-edit.html?id=${user.id}`;
            document.getElementById("btnDelete").addEventListener("click", () => {
                if (confirm("Bạn có chắc chắn muốn xóa?")) {
                    users = users.filter(u => u.id != id);
                    localStorage.setItem("users", JSON.stringify(users));
                    alert("Đã xóa!");
                    window.location.href = "user.html";
                }
            });
        });
    </script>
</body>

</html>